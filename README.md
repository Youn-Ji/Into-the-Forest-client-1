# 🌲🌳 Into the Forest 🌳🌲

<img src= "https://user-images.githubusercontent.com/63646254/108602050-44902580-73e3-11eb-823b-a5075b6fa34b.JPG" width="60%" height="60%" >

Into the Forest는 횡스크롤 러닝 액션 게임으로 길잃은 강아지가 집을 찾아가는 게임입니다. <br>
가볍게 솔로 모드로 플레이하시거나, 친한 친구들과 멀티 모드로 추억을 남겨보세요!

<br/>

# 시연 영상 

![stage1](https://user-images.githubusercontent.com/63646254/108600561-232b3b80-73db-11eb-92da-102f7a70925e.gif)

![stage2](https://user-images.githubusercontent.com/63646254/108600763-5621ff00-73dc-11eb-8ab3-242cee6e397a.gif)

![stage3](https://user-images.githubusercontent.com/63646254/108600776-633eee00-73dc-11eb-94bc-e0160cd0c94b.gif)

* 배포 사이트: <a href="http://intotheforest.space">배포 링크</a>
* Repository
  * 클라이언트: <a href="https://github.com/codestates/Into-the-Forest-client">Client</a>
  * 서버: <a href="https://github.com/codestates/Into-the-Forest-server">Server</a>

<br/>

# 목차

* [프로젝트 소개](#프로젝트-소개)
* [팀원 소개](#팀원-소개)
* [개발 기간](#개발-기간)
* [스택](#스택)
* [WHY (About Tech Stack)](#why-about-tech-stack)
* [워크플로우](#워크플로우)
* [기능](#기능)
* [How to 배포](#how-to-배포)
* [어려웠던점](#어려웠던점)

<br/>

# 프로젝트 소개


<br/>

# 팀원 소개

<table>
  <tbody>
    <tr>
      <td align="center">
        <a href="https://github.com/Youn-Ji">
          <sub>
            <b>송윤지</b>
          </sub>
        </a>
        <br>
      </td>
      <td>
        <strong>🏴 Backend</strong>
      </td>
    </tr>
     <tr>
      <td align="center">
        <a href="https://github.com/urusara13">
          <sub>
            <b>안경훈</b>
          </sub>
        </a>
        <br>
      </td>
      <td>
        <strong>🏁 Frontend</strong>
      </td>
    </tr>
      <td align="center">
        <a href="https://github.com/mnmms">
          <sub>
            <b>이소정</b>
          </sub>
        </a>
        <br>
      </td>
      <td>
        <strong>🏁 Frontend</strong>
      </td>
    </tr>
    <tr>
      <td align="center">
        <a href="https://github.com/jaejin1027">
          <sub>
            <b>이재진</b>
          </sub>
        </a>
        <br>
      </td>
      <td>
        <strong>🏁 Frontend</strong>
      </td>
    </tr>
    <tr>
  </tbody>
</table>


<br/>

# 개발 기간

<br/>


# 스택


### FRONT
![](https://img.shields.io/badge/FRONT-Typescript-informational?style=for-the-badge&logo=TypeScript)

![](https://img.shields.io/badge/FRONT-React-61DAFB?style=for-the-badge&logo=React) ![](https://img.shields.io/badge/FRONT-React--hook-61DAFB?style=for-the-badge&logo=React) 

![](https://img.shields.io/badge/FRONT-redux--saga-lightgreenm?style=for-the-badge&logo=redux) 

![](https://img.shields.io/badge/FRONT-phaser-dodgerblue?style=for-the-badge&logo=appveyor) 

![](https://img.shields.io/badge/FRONT-socket.io-lightgrey?style=for-the-badge&logo=data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwMCIgaGVpZ2h0PSIyNTAwIiB2aWV3Qm94PSIwIDAgMjU2IDI1NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWluWU1pbiBtZWV0Ij48cGF0aCBkPSJNOTYuNDQ3IDcuMzgyYzMyLjI2Ny04LjI3NSA2Ny45MjktMy40NTMgOTYuMzg2IDE0LjExIDM1Ljg0IDIxLjQzMyA1OS4yMzggNjEuOTc2IDU5LjgzMyAxMDMuNzEgMS4zMSA0Mi4xNS0yMC42NTkgODMuOTQ0LTU1Ljk2MyAxMDYuODY1LTM5LjI5MyAyNi40MzMtOTMuNjQ4IDI3LjQ0Ni0xMzMuNzc1IDIuMzIyLTQwLjktMjQuNDEtNjQuNzc0LTczLjY0NS01OC42NDEtMTIwLjkxNiA0Ljk0LTQ5Ljk1IDQzLjUyLTk0LjAwNSA5Mi4xNi0xMDYuMDl6IiBmaWxsPSIjMDEwMTAxIi8+PHBhdGggZD0iTTkxLjUwNSAyNy44MDNjNjAuOTY0LTI0LjQxIDEzNS43NCAyMC42NTggMTQyLjA1IDg2LjAyOCA5LjgyNCA1OC44Mi0zOC45OTUgMTE4LjU5My05OC41OSAxMjAuMzItNTYuNjc3IDUuNjU2LTExMS40NDktNDIuMzktMTEzLjA1Ni05OS4zMDQtNC4yMjctNDYuMDggMjYuMTM2LTkxLjgwMyA2OS41OTYtMTA3LjA0NHoiIGZpbGw9IiNGRkYiLz48cGF0aCBkPSJNOTcuNjM3IDEyMS42OWMyNy4zMjctMjIuMzI2IDU0LjA1OC00NS40MjYgODEuOTgtNjcuMDk3LTE0LjY0NiAyMi41MDUtMjkuNzA4IDQ0LjcxMS00NC4zNTQgNjcuMjE1LTEyLjU2Mi4wNi0yNS4xMjMuMDYtMzcuNjI2LS4xMTl6TTEyMC43MzcgMTM0LjEzMmMxMi42MjEgMCAyNS4xODMgMCAzNy43NDUuMTc5LTI3LjUwNSAyMi4yMDYtNTQuMTE3IDQ1LjQ4NC04Mi4wOTkgNjcuMDk2IDE0LjY0Ni0yMi41MDUgMjkuNzA4LTQ0Ljc3IDQ0LjM1NC02Ny4yNzV6IiBmaWxsPSIjMDEwMTAxIi8+PC9zdmc+) 


### BACK
![](https://img.shields.io/badge/FRONT-Typescript-informational?style=for-the-badge&logo=TypeScript)

![](https://img.shields.io/badge/BACK-nestjs-red?style=for-the-badge&logo=nestjs)

![](https://img.shields.io/badge/BACK-mysql-cornflowerblue?style=for-the-badge&logo=mysql)

![](https://img.shields.io/badge/BACK-sequelize-deepskyblue?style=for-the-badge&logo=data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgMjAiIHhtbDpzcGFjZT0icHJlc2VydmUiPiAgPGltYWdlIGlkPSJpbWFnZTAiIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgeD0iMCIgeT0iMCIKICAgIGhyZWY9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQlFBQUFBVUNBWUFBQUNOaVIwTkFBQUFCR2RCVFVFQUFMR1BDL3hoQlFBQUFDQmpTRkpOCkFBQjZKZ0FBZ0lRQUFQb0FBQUNBNkFBQWRUQUFBT3BnQUFBNm1BQUFGM0NjdWxFOEFBQUFCbUpMUjBRQS93RC9BUCtndmFlVEFBQUEKQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBQUIzUkpUVVVINVFFTERqWXVQMmcva0FBQUJFQkpSRUZVT010MWxFdHNsR1VVaHAvegpmZi9NUDVlV21iWjBiS1VRV3lnV05WeE1ORXBCRnNyQ2FJakVEVHMzSmlhR1JNUEdoVmlWeEJnWEdvMlN1RE9SUkpERVNBUWhwRXFwClhDb2hwTU5WUzlGU2d2UTZuYlp6YWVlZitmL2pnckZBd0cvOW5pZmZPZWM5ci9BL3p4N01neGlMWCtsRWd5N0FRZVJEclBNYmdmcisKbHBvSDFwbjdRRDhYWVY0aENGcXBlQjhSQlB0UWZSN1ZUUVM2bDByNVl6Um9rM09LUFZTOER5Z0xvTU5sS09YQk92VUV3VGJRN2FoMgpWRFhacXF3T1VKQUJSSFpqekhjRWxTbENOZmd2aGFwQVZleFBPUkFUSWZBM2crNUF0Uk1JQVhPSW5FWmtFQWlqTEFkOUd0VW9VRUhrCkpDS2ZJYVliMVhsL1N5M0NjY1dkeUR4UkNZZmVJZEJYUUd1cTRyVGpsYnQ5eDY1Ulk1NVRFV1BMM2htbldEam5MVXB1UW5WZGRhNTUKRlhQQXpVMS9NdmZZMGt1V3R6Nmc2ZXlWTGxSZnIwVGNzQnB6SFdPT0lKSjM4L2wxc2V6MEpqWEdEV2NuUWczbno3UktwUkxNUGJUawptb2hjVkpHRTlVcXB1b0gwNnRUdngveXBaNTQ5WWp2R2s5amE1TmJvOU15VGJuRnVVR0JQWU0zTHZyWHJLeEczSlRTYmxZYkJBVTBNCnBNbTFkc2hNKytQTEVGbnRGQXZ4UlVOWDl6ZWRQdHJja082cmQ3T1Q2ZFNQK3c0NTlzUjV5aDFyUkZTSlRjOWtvN081cUJlTnRPVWEKNnpVMGRsMWpJemRrZHVVYThWdmJDSmNDYWpKWmxVS0dodjVUN2ZGYnd5bmpsV1pVQkJXRHVoRWMvZUViT05vaktLZ0lxRXE0VUtSeApja3pzNkZWR043NUlic2xTVklUNDZFMFcvM2xCWXRmNk5UUTFCdGFpWW00dkhnaEVjQ3I5WTZCVit5amlSeUpwUlNmQ3hkbEdvNGJrCmFJWlFPY0JtYmxCM3ZnK0pOV0I4WDhvMWkzSml6QVZieUsxZE1LRXFqamYrbDFpMGFuREZpMGRUK2Jwa0xKU0lFWXVGQ0ZkOEVqZHYKRWIxeUNqdWJJWjlhUm1INVNrcUpwRk03UEZoYmQrbnM3YzZxcm5aUTc0N0JSVFEybFgwNFBKdUxGNUkxaWxla0hIWEZVWXRhaCtLeQpkb290S3pUUU1xbSs3cWc3UGRWMmQ4dXFBWTRUaWFMemhZV0xVY1MzNVFwMXc5ZkZqZzB6M3JtS1N0aGxKaGxCL0RLSmtUR0pEVjFXCm04dWcxdnIzbnAxaUhHTUIrVytHRFFoL0lMSlhrYnhnZzhUSU9QR3ByTWIvR2RMbTR3ZHhKMGRRWThvcTBpTXdCTHI0N2pOMnhIRkIKY3Q3dFgrdHlBbjBmTVhzRXVvUGFoa2RGNWUxWUp1TkdyMTFSNDgyajgva0RJbkpHUkpwVjlVMmdwUXIwakRqWXhGT3ZncGdoaEJxZwpEV2dDM2FqaFNHTlFVOThMWEpUQWJ3bE4zaXdiYi81N1V5cGNrRkp4QzdBVlNBSTVrUDBpZkNGaUprUlZhZC9aQzRpckdteEdkUWZvCmhtbzRGQkU1TEdYdmw5aWxubHFaeTIwQVhnRGlRQVU0aWNpbmduU0RsdEk5dSsvRTE0cXUwMmg1RGpHMlRqWFlocklkZEJXSWlGZWMKaUYzc1VmR0tLUkFGQmtDK0VwRzlxc0dVc1dINmYvMzgzanhjQUw5M2tyVzdPdW5mZWZ3UlZOOEFYalB6aGVibzVWNmtWQndEK1ZhRQpyK1BKcHI4TE0rT2tqMzM1NElDOUQveHVMNGl4U3JEZTVMTmRrWUUrYTR1enU3RE9DVlQ5ZE05WEQ2ejdGMDRZQWVmT0h2T3JBQUFBCkpYUkZXSFJrWVhSbE9tTnlaV0YwWlFBeU1ESXhMVEF4TFRFeFZERTBPalUwT2pRMUt6QXdPakF3RnVCK1BRQUFBQ1YwUlZoMFpHRjAKWlRwdGIyUnBabmtBTWpBeU1TMHdNUzB4TVZReE5EbzFORG8wTlNzd01Eb3dNR2U5eG9FQUFBQUFTVVZPUks1Q1lJST0iIC8+Cjwvc3ZnPgo=)

![](https://img.shields.io/badge/BACK-socket.io-lightgrey?style=for-the-badge&logo=data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUwMCIgaGVpZ2h0PSIyNTAwIiB2aWV3Qm94PSIwIDAgMjU2IDI1NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWluWU1pbiBtZWV0Ij48cGF0aCBkPSJNOTYuNDQ3IDcuMzgyYzMyLjI2Ny04LjI3NSA2Ny45MjktMy40NTMgOTYuMzg2IDE0LjExIDM1Ljg0IDIxLjQzMyA1OS4yMzggNjEuOTc2IDU5LjgzMyAxMDMuNzEgMS4zMSA0Mi4xNS0yMC42NTkgODMuOTQ0LTU1Ljk2MyAxMDYuODY1LTM5LjI5MyAyNi40MzMtOTMuNjQ4IDI3LjQ0Ni0xMzMuNzc1IDIuMzIyLTQwLjktMjQuNDEtNjQuNzc0LTczLjY0NS01OC42NDEtMTIwLjkxNiA0Ljk0LTQ5Ljk1IDQzLjUyLTk0LjAwNSA5Mi4xNi0xMDYuMDl6IiBmaWxsPSIjMDEwMTAxIi8+PHBhdGggZD0iTTkxLjUwNSAyNy44MDNjNjAuOTY0LTI0LjQxIDEzNS43NCAyMC42NTggMTQyLjA1IDg2LjAyOCA5LjgyNCA1OC44Mi0zOC45OTUgMTE4LjU5My05OC41OSAxMjAuMzItNTYuNjc3IDUuNjU2LTExMS40NDktNDIuMzktMTEzLjA1Ni05OS4zMDQtNC4yMjctNDYuMDggMjYuMTM2LTkxLjgwMyA2OS41OTYtMTA3LjA0NHoiIGZpbGw9IiNGRkYiLz48cGF0aCBkPSJNOTcuNjM3IDEyMS42OWMyNy4zMjctMjIuMzI2IDU0LjA1OC00NS40MjYgODEuOTgtNjcuMDk3LTE0LjY0NiAyMi41MDUtMjkuNzA4IDQ0LjcxMS00NC4zNTQgNjcuMjE1LTEyLjU2Mi4wNi0yNS4xMjMuMDYtMzcuNjI2LS4xMTl6TTEyMC43MzcgMTM0LjEzMmMxMi42MjEgMCAyNS4xODMgMCAzNy43NDUuMTc5LTI3LjUwNSAyMi4yMDYtNTQuMTE3IDQ1LjQ4NC04Mi4wOTkgNjcuMDk2IDE0LjY0Ni0yMi41MDUgMjkuNzA4LTQ0Ljc3IDQ0LjM1NC02Ny4yNzV6IiBmaWxsPSIjMDEwMTAxIi8+PC9zdmc+)


<br/>

# WHY (About Tech Stack)


### Why TypeScript?
저희 프로젝트는 3명의 프론트엔드 개발자가 있습니다. 개별적으로 코드를 치는 과정에서 발생할 수 있는 사소한 타입 오류를 타입스크립트를 도입해 방지하고자 하였습니다. 
자바스크립트의 경우 타입 오류를 검사하기 위해서 매번 실행해야하지만 타입스크립트는 실행 이전에 코드 단위에서 오류를 잡아낼 수 있기 때문에 속도감 있는 에러 핸들링을 할 수 있을 것이라 생각했습니다. 


### Why Phaser?
Phaser는 2D 비디오 게임을 만들기위한 프레임 워크입니다. HTML5 Canvas를 사용하여 게임을 렌더링하고 순수 JavaScript를 사용하여 게임을 실행합니다. 
물론 바닐라 JavaScript를 사용하여 Canvas로 구현할 수 있겠지만 Phaser를 도입한 이유는 한정된 시간 내에서 게임 설계에 더 집중하고 싶었기 때문입니다. 프레임워크를 사용하여 개발시간을 줄이고 워크 플로우를 용이하게 했습니다.
또한 이번 프로젝트에서는 지금 껏 사용한 적이 없는 새로운 스택을 많이 도입했습니다. 그로인한 부담감을 최대한 줄여내고 싶었습니다.
아쉬운 점이라면 Phaser 프레임워크의 도움도 많이 받았지만 Phaser2 와 Phaser 3의 마이그레이션이 매우 부족했는데 
많은 예제들이 2 버전으로 작성되어 이 과정에서 어려움을 겪었습니다. 디펜던시 버전관리의 중요성을 여실히 깨닫게 됐습니다.


### Why NestJS?
타입스크립트를 백퍼센트 지원합니다. 확실한 틀(controller, module, service)이 정해져 있고 관련 공식문서가 자세했기 때문에 러닝커브가 완만할 것으로 예상되었습니다. nestjs는 express 다음으로 가장 주목받는 nodejs프레임워크입니다. 백엔드에서 타입스크립트를 깊게 이해해 볼 수 있는 시간이 될 수 있을 뿐만 아니라 개발자 경험을 위해 좋은 도전이 될 것이라 생각했습니다.


<br/>


# 워크플로우


<br/>

# 기능


<br/>

# How to 배포
멀티모드에서는 화상 채팅 기능을 구현했는데 이 과정에서 HTTPS가 필요하다는 것을 알게 됐습니다. WebRTC에서 제공하는 getUserMedia는 보안상의 이유로
HTTPS를 사용하지 않으면 Media Resource에 대한 접속 권한을 얻지 못하게 됩니다.
다만 PeerJS를 통해 피어 간의 연결이 성립된 이후엔(signaling) RTCDataChannel 이 아닌 WebSocket을 통해 데이터를 주고받게 했습니다.
HTTPS의 구성은 ClondFront-S3와 ELB-EC2로 구성되어 있는데 HTTPS를 통해서 웹캠의 비디오와 오디오 스트림에 접근하고 피어 연결이 성립되면 그때 ELB의 TCP 리스너를 통해 WebSocket으로 데이터 스트림을 주고받는 방식으로 구현하였습니다.

<br/>

# 어려웠던점

### <경훈>

구현하는데 가장 어려웠던 것은 바로 테스트가 쉽지 않다는 점이었습니다.
다른 네트워크에 있는 사용자와 통신을 하는 것이 중요한데 배포도 안 된 상태의 로컬 환경에서의 테스트는 큰 의미가 없었고
테스트 함수를 작성하려고 해도 어떻게 다른 미디어 스트림을 얻고 그것을 다른 네트워크로부터 전송받을지 전혀 감이 오지 않았습니다.
심지어 Code Pipeline과 같은 배포 자동화가 적용된 것도 아니어서 초기 예상과 달리 매우 험난한 길이었습니다.
어떻게든 팀원과 협력하여 어느 정도 구현은 하였지만 STUN, TURN 네트워크의 방화벽 관련 이슈는커녕 디버깅조차 버거웠습니다.
조금 더 많은 것을 해보지 못한 아쉬움이 남았지만 좋은 경험이 됐다고 생각합니다.

### <윤지>

서버와 클라이언트의 Socket 통신을 구현하할 때 어려움이 있었습니다. 공식문서를 보고 따라했지만 동작하지 않는 것을 보고 새로운 스택을 사용하는데 있어서 회의감이 들었습니다. Nestjs , typescript는 처음 써보았고 관련 레퍼런스를 찾는 것도 쉽지 않았기에 여기서 express 를 사용해야하나 고민했습니다. 그러나 고생 끝에 디펜던시 버전 문제였다는 것을 알게되었습니다. 서버와 클라이언트의 socket.io 버전을 맞춰주니 아주 잘 통신되는 것을 확인할 수 있었습니다. 이 일을 통해 개발에 있어 디펜던시 버전 또한 굉장히 중요하다는 것을 다시 한번 깨닫고, 주의깊게 살펴야한다는 것을 배웠습니다.

### <소정>

### <재진>

<br/>


# For project worklog

[https://github.com/codestates/Into-the-Forest-client/wiki/worklog](https://github.com/codestates/Into-the-Forest-client/wiki/worklog)
